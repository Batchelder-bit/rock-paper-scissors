<!DOCTYPE html>
<HTML>
    <meta chaset="utf-8">
    <head>
    <title>
        Rock, Paper, Scissors
    </title>
    </head>

    <body>
        <h1>Rock Paper Scissors</h1>
        <div></div>
        <div>
            <button id="rock">ROCK</button>
            <button id="paper">PAPER</button>
            <button id="scissors">SCISSORS</button>
            <div id="scoreboard"></div>
        </div>
    </body>
    <script>

        let userWinCount = 0;
        let computerWinCount = 0;
        //This function gets the computer choice for the following round;
        function getComputerChoice() {
            const randomChoice = Math.floor(Math.random() * 3);
            if(randomChoice === 0) {
                return 'rock';
            } else if(randomChoice === 1) {
                return 'paper';
            } else {
                return 'scissors';
            }
        }

        //This function gets the users input, can be called right before playaRound;
        function getUserInput () {
            let userInput = prompt('Choose rock, paper, or scissors', '');
            return userInput.toLowerCase();
        }

        const rock = document.querySelector('#rock');
        const paper = document.querySelector('#paper');
        const scissors = document.querySelector('#scissors');
        const scoreboard = document.querySelector('#scoreboard');
        let emptyComputerChoice;
        let gameCount = 0;

        rock.addEventListener ("click", () => {
            playGame('rock');
        });
        paper.addEventListener ("click", () => {
            playGame('paper');
        });
        scissors.addEventListener ("click", () => {
            playGame('scissors');
        });



        //Commented out the following lines as they were for original testing stuff.
        //const computerChoice = getComputerChoice();
       // console.log('The computers choice is: ' + computerChoice);
        //let computerChoice = getComputerChoice();
       // console.log(computerChoice);

       // let userInput = prompt('Choose rock, paper or scissors', '');
      //  console.log(userInput);
       // let round1 = playaRound(userInput, computerChoice);

        function playaRound (user, computer) {
            const whoWonText = document.createElement('div');
            if(user === 'rock' && computer === 'scissors') {
            //    console.log('Rock Beat Scissors; You WIN');
                whoWonText.textContent = 'Rock Beat Scissors; You WIN'; 
                scoreboard.appendChild(whoWonText);
                userWinCount++
                return 'WIN';
            } else if (user === 'paper' && computer === 'rock') {
            //    console.log('Paper beats Rock; You WIN');
                whoWonText.textContent = 'Paper beats Rock; You WIN';
                scoreboard.appendChild(whoWonText);
                userWinCount++
                return 'WIN';
            } else if (user === 'scissors' && computer === 'paper') {
            //    console.log('Scissors beats Paper; You WIN');
                whoWonText.textContent = 'Scissors beats Paper; You WIN';
                scoreboard.appendChild(whoWonText);
                userWinCount++
                return 'WIN';
            } else if (user === computer) {
            //    console.log('You tied, neither of you win.');
                whoWonText.textContent = 'You tied, neither of you win.';
                scoreboard.appendChild(whoWonText);
                return 'TIE';
            } else {
            //    console.log('You lost, ' + user + ' gets beaten by ' + computer + '.');
                whoWonText.textContent = ('You lost, ' + user + ' gets beaten by ' + computer + '.')
                scoreboard.appendChild(whoWonText);
                computerWinCount++
                return 'LOSE';
            }
        }


        function playGame (roundOneUserInput, roundOneComputerChoice) {
            let currentScore = document.createElement('div');
        //    let roundOneUserInput = getUserInput();
            roundOneComputerChoice = getComputerChoice();
            let roundResults = playaRound(roundOneUserInput, roundOneComputerChoice);
            currentScore.textContent = ('The user has won ' + userWinCount + ' games. The computer has won ' + computerWinCount + ' games.');
            scoreboard.appendChild(currentScore);
            gameCount++;

            if (userWinCount >= 3 && gameCount == 5) {
            let winnerText = document.createElement('div');
            winnerText.textContent = 'You WON the game!';
            scoreboard.appendChild(winnerText);
            userWinCount = 0;
            computerWinCount = 0;
        //    console.log('You WON the game!');
            } else if (userWinCount == computerWinCount && gameCount == 5) {
            let tiedText = document.createElement('div');
            tiedText.textContent = 'You tied with the machine';
            scoreboard.appendChild(tiedText);
            userWinCount = 0;
            computerWinCount = 0;
        //    console.log('You tied with the machine');
            } else if (userWinCount > computerWinCount && gameCount == 5){
            let winnerText = document.createElement('div');
            winnerText.textContent = 'You WON the game!';
            scoreboard.appendChild(winnerText);
            userWinCount = 0;
            computerWinCount = 0;
        //    console.log('You WON the game!');
            } else if (userWinCount < computerWinCount && gameCount == 5) {
            let loserText = document.createElement('div');
            loserText.textContent = 'The computer has won';
            scoreboard.appendChild(loserText);
            userWinCount = 0;
            computerWinCount = 0;
        //    console.log('The computer has won');
            }
              else {
            console.log('Game has not finished');
            return roundResults;
              }
        }

        // let round1 = playGame();
        // let round2 = playGame();
        // let round3 = playGame();
        // let round4 = playGame();
        // let round5 = playGame();




        //console.log(round1);
    </script>

</HTML>